# 重点旅客信息系统

基于 Vue 3 + Electron 的重点旅客信息管理系统，用于车站重点旅客信息登记和服务管理。

## 📋 项目概述

### 技术栈
- **前端框架**: Vue 3 + TypeScript
- **桌面框架**: Electron
- **构建工具**: Vite
- **包管理器**: Yarn
- **目标平台**: Windows 单机桌面应用

### 核心功能
1. **主页面展示** - 各车次对应的重点旅客信息展示和登记
2. **车次信息管理** - 可导入 Excel 格式的车次信息
3. **旅客信息管理** - 重点旅客登记和信息维护
4. **智能提醒** - 车次即将开车时弹窗提醒，展示需要服务的旅客

## 🚀 快速开始

### 环境要求
- Node.js (建议最新 LTS 版本)
- Yarn 包管理器

### 安装依赖
```bash
yarn install
```

### 开发模式
```bash
# 方式一：分别启动（推荐）
# 终端1：启动 Vite 开发服务器
yarn dev

# 终端2：启动 Electron 应用
yarn electron:dev
```

### 构建应用
```bash
# 构建前端项目
yarn build

# 构建 Electron 应用
yarn electron:build

# 构建 Windows 安装包
yarn build:win
```

## 📊 数据结构

### 车次信息表字段
| 字段 | 说明 | 示例 |
|------|------|------|
| 序号 | 记录序号 | 1 |
| 担当局 | 负责局段 | 西安局 |
| 车次 | 列车车次 | T151 |
| 运行区间(D列) | 起始站点 | 西安 |
| 运行区间(F列) | 终到站点 | 北京 |
| 到点 | 到达时间 | 08:30 |
| 开点 | 开车时间 | 08:35 |
| 股道 | 停靠股道 | 3 |
| 站台 | 站台号 | 2 |
| 站停 | 停站时间 | 5分钟 |
| 车型 | 列车类型 | 空调客车 |
| 定员 | 定员人数 | 1186 |
| 编组 | 车厢编组 | 18 |
| 检票口 | 检票口号 | A3 |
| 开检时间 | 开始检票时间 | 08:02 |
| 检票上岗时间 | 检票员上岗时间 | 07:55 |
| 站台上岗时间 | 站台员上岗时间 | 08:25 |
| 立折时间 | 立折作业时间 | 08:30 |
| 给水作业 | 给水作业时间 | 08:31 |
| 吸污 | 吸污作业 | 是 |
| 行包作业 | 行包作业 | 否 |
| 备注 | 其他备注 | - |

### 重点旅客信息表字段
| 字段 | 说明 | 对应Excel列 |
|------|------|------------|
| 序号 | 记录序号 | - |
| 日期 | 出行日期 | A列 |
| 车次 | 列车车次 | B列 |
| 姓名 | 旅客姓名 | C列 |
| 类别 | 旅客类别 | - |
| 服务 | 服务内容 | D列 |
| 服务人员 | 服务人员 | F列 |
| 同行人数 | 同行人员 | G列 |
| 牌号 | 座位牌号 | H列 |
| 备注 | 其他备注 | I列 |

## 🔧 业务逻辑说明

### 旅客类别
- **军**: 军人旅客
- **老**: 老年旅客  
- **病**: 病患旅客
- **残**: 残疾旅客
- **儿童**: 儿童旅客

### 车次分类规则
基于运行区间判断车次类型：
- **始发车**: D列运行区间为"西安"
- **终到车**: F列运行区间为"西安"  
- **通过车**: 其他情况

### 开检提醒时间规则
| 车次类型 | 车次前缀 | 提醒时间 |
|----------|----------|----------|
| 始发车 | T、K开头 | 提前33分钟 |
| 始发车 | C、D开头 | 提前23分钟 |
| 始发车 | 其他 | 提前23分钟 |
| 通过车 | 全部 | 提前3分钟 |
| 终到车 | 全部 | 仅显示到达时间，无提醒 |

### 旅客排序规则
按优先级排序：
1. **最高优先级**: 没有开检时间和到站时间的旅客
2. **高优先级**: 临近开检时间的旅客
3. **中优先级**: 当天未到开检/到站时间的旅客  
4. **低优先级**: 第二天凌晨12点-1点的旅客
5. **最低优先级**: 已过开检时间的旅客

**注意**: 
- 终到车使用到站时间排序
- 非终到车使用开检时间排序
- 第二天凌晨1点前的车次在当天显示

### 业务约束
- **牌号唯一性**: 同一天内牌号不能重复
- **服务状态**: 首页"离厅"操作表示旅客已服务
- **数据独立性**: 旅客信息页面和首页信息相互独立
- **备注更新**: 修改备注后重新上传不影响现有数据

## 📝 开发待办

### 功能优化
- [ ] 首页删除功能：应删除未删除的显示红色
- [ ] 车次状态：车到点时显示黄色
- [ ] 数据独立：旅客信息和首页信息完全独立

### 统计功能
- [ ] 今日重点旅客总数统计
- [ ] 已服务重点旅客数统计
- [ ] 服务完成率展示

## 🛠️ 项目结构

```
KeyunZhongdian/
├── src/                    # 源代码目录
├── dist/                   # 构建输出目录
├── build/                  # 构建资源目录
├── main.js                 # Electron 主进程
├── package.json           # 项目配置
├── vite.config.ts         # Vite 配置
├── tsconfig.json          # TypeScript 配置
└── README.md              # 项目说明
```

## 📞 技术支持

- **开发者**: wang
- **许可证**: MIT
- **版本**: 2.0.0

## 🔄 更新日志

### v2.0.0
- 基于 Vue 3 + Electron 重构
- 新增 TypeScript 支持
- 优化开检提醒逻辑
- 完善排序规则